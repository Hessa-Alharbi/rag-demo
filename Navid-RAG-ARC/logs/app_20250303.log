2025-03-03 07:42:51.690 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: status_code: None, body: The client must be instantiated be either passing in token or setting CO_API_KEY
2025-03-03 07:44:08.564 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: [Errno 11001] getaddrinfo failed
2025-03-03 08:12:15.248 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: status_code: None, body: The client must be instantiated be either passing in token or setting CO_API_KEY
2025-03-03 08:14:01.295 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: status_code: None, body: The client must be instantiated be either passing in token or setting CO_API_KEY
2025-03-03 08:14:47.850 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: status_code: None, body: The client must be instantiated be either passing in token or setting CO_API_KEY
2025-03-03 08:15:15.108 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: status_code: None, body: The client must be instantiated be either passing in token or setting CO_API_KEY
2025-03-03 08:16:11.662 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-03-03 08:16:58.564 | ERROR    | apps.rag.services:__init__:52 | Failed to initialize RAGService: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-03-03 08:29:23.122 | INFO     | __main__:lifespan:19 | Starting up application...
2025-03-03 08:29:23.124 | INFO     | core.db:init_db:20 | Initializing database...
2025-03-03 08:29:23.150 | INFO     | core.db:init_db:24 | Database initialization completed successfully
2025-03-03 08:29:33.189 | ERROR    | core.vector_store.connection:ensure_connection:22 | Failed to connect to Milvus: <MilvusException: (code=2, message=Fail connecting to server on localhost:19530, illegal connection params or server unavailable)>
2025-03-03 08:29:33.190 | ERROR    | __main__:lifespan:33 | Failed to start application: <MilvusException: (code=2, message=Fail connecting to server on localhost:19530, illegal connection params or server unavailable)>
2025-03-03 08:29:33.190 | INFO     | __main__:lifespan:41 | Application shutdown complete
2025-03-03 08:38:17.640 | INFO     | __main__:lifespan:19 | Starting up application...
2025-03-03 08:38:17.642 | INFO     | core.db:init_db:20 | Initializing database...
2025-03-03 08:38:17.664 | INFO     | core.db:init_db:24 | Database initialization completed successfully
2025-03-03 08:38:17.764 | INFO     | core.vector_store.connection:ensure_connection:20 | Successfully connected to Milvus
2025-03-03 08:39:24.679 | INFO     | apps.chat.routes:process_query:414 | Processing query request: explain it for conversation: 494087b1-bbfa-44af-a165-25b2ba152ad6
2025-03-03 08:40:50.196 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace 494087b1-bbfa-44af-a165-25b2ba152ad6
2025-03-03 08:40:52.232 | ERROR    | apps.rag.services:_generate_search_queries:398 | Error generating search queries: Error code: 401 - {'error': 'Unauthorized'}
2025-03-03 08:40:52.234 | ERROR    | apps.rag.services:hybrid_search:318 | Error in hybrid search: RAGService._get_default_queries() missing 1 required positional argument: 'is_arabic'
2025-03-03 08:41:14.583 | ERROR    | apps.test.routes:test_llm:116 | LLM test failed: Error code: 401 - {'error': 'Unauthorized'}
2025-03-03 08:44:49.407 | INFO     | __main__:lifespan:19 | Starting up application...
2025-03-03 08:44:49.423 | INFO     | core.db:init_db:20 | Initializing database...
2025-03-03 08:44:49.464 | INFO     | core.db:init_db:24 | Database initialization completed successfully
2025-03-03 08:44:49.691 | INFO     | core.vector_store.connection:ensure_connection:20 | Successfully connected to Milvus
2025-03-03 08:47:23.757 | DEBUG    | apps.chat.routes:upload_attachments:275 | Uploading files to conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:48:37.984 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace default
2025-03-03 08:48:55.424 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:50:47.340 | INFO     | apps.chat.routes:process_query:414 | Processing query request: explain it for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:50:49.109 | ERROR    | apps.rag.services:_generate_search_queries:398 | Error generating search queries: Error code: 400 - {'object': 'error', 'message': '[{\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[int]\', 0), \'msg\': \'Input should be a valid integer\', \'input\': [{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: explain it\\nReturn ONLY a JSON object.\'}]}, {\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[list[int]]\', 0, 0), \'msg\': \'Input should be a valid integer\', \'input\': {\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}}, {\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[list[int]]\', 0, 1), \'msg\': \'Input should be a valid integer\', \'input\': {\'content\': \'Generate search queries for this question: explain it\\nReturn ONLY a JSON object.\'}}, {\'type\': \'string_type\', \'loc\': (\'body\', \'prompt\', \'str\'), \'msg\': \'Input should be a valid string\', \'input\': [[{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: explain it\\nReturn ONLY a JSON object.\'}]]}, {\'type\': \'string_type\', \'loc\': (\'body\', \'prompt\', \'list[str]\', 0), \'msg\': \'Input should be a valid string\', \'input\': [{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: explain it\\nReturn ONLY a JSON object.\'}]}]', 'type': 'BadRequestError', 'param': None, 'code': 400}
2025-03-03 08:50:49.112 | ERROR    | apps.rag.services:hybrid_search:318 | Error in hybrid search: RAGService._get_default_queries() missing 1 required positional argument: 'is_arabic'
2025-03-03 08:51:05.647 | INFO     | apps.chat.routes:process_query:414 | Processing query request: what is this document about? for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:51:06.727 | ERROR    | apps.rag.services:_generate_search_queries:398 | Error generating search queries: Error code: 400 - {'object': 'error', 'message': '[{\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[int]\', 0), \'msg\': \'Input should be a valid integer\', \'input\': [{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: what is this document about?\\nReturn ONLY a JSON object.\'}]}, {\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[list[int]]\', 0, 0), \'msg\': \'Input should be a valid integer\', \'input\': {\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}}, {\'type\': \'int_type\', \'loc\': (\'body\', \'prompt\', \'list[list[int]]\', 0, 1), \'msg\': \'Input should be a valid integer\', \'input\': {\'content\': \'Generate search queries for this question: what is this document about?\\nReturn ONLY a JSON object.\'}}, {\'type\': \'string_type\', \'loc\': (\'body\', \'prompt\', \'str\'), \'msg\': \'Input should be a valid string\', \'input\': [[{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: what is this document about?\\nReturn ONLY a JSON object.\'}]]}, {\'type\': \'string_type\', \'loc\': (\'body\', \'prompt\', \'list[str]\', 0), \'msg\': \'Input should be a valid string\', \'input\': [{\'content\': \'You are a search query generator that helps create effective search queries.\\nYour responses should be valid JSON only, with no additional text or explanation.\\nAlways return a JSON object with these fields:\\n- semantic_queries: List of alternative ways to express the query\\n- keyword_terms: Important individual terms for searching\\n- arabic_terms: Arabic language terms (if applicable)\\n- filters: Any metadata filters to apply\\n\\nExample format:\\n{\\n    "semantic_queries": ["main query", "alternative phrasing"],\\n    "keyword_terms": ["important", "terms"],\\n    "arabic_terms": ["arabic terms"],\\n    "filters": {}\\n}\'}, {\'content\': \'Generate search queries for this question: what is this document about?\\nReturn ONLY a JSON object.\'}]}]', 'type': 'BadRequestError', 'param': None, 'code': 400}
2025-03-03 08:51:06.736 | ERROR    | apps.rag.services:hybrid_search:318 | Error in hybrid search: RAGService._get_default_queries() missing 1 required positional argument: 'is_arabic'
2025-03-03 08:54:46.067 | INFO     | core.vector_store.connection:close_connection:32 | Disconnected from Milvus
2025-03-03 08:54:46.070 | INFO     | __main__:lifespan:41 | Application shutdown complete
2025-03-03 08:55:47.274 | INFO     | __main__:lifespan:19 | Starting up application...
2025-03-03 08:55:47.274 | INFO     | core.db:init_db:20 | Initializing database...
2025-03-03 08:55:47.323 | INFO     | core.db:init_db:24 | Database initialization completed successfully
2025-03-03 08:55:47.543 | INFO     | core.vector_store.connection:ensure_connection:20 | Successfully connected to Milvus
2025-03-03 08:55:58.091 | INFO     | apps.chat.routes:process_query:414 | Processing query request: what is this document about? for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:56:51.024 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:57:04.213 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 08:57:05.881 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: what is this document about?
2025-03-03 08:57:06.256 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: what is this document about?
2025-03-03 08:58:40.588 | DEBUG    | apps.chat.routes:list_attachments:353 | Fetching attachments for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:58:40.670 | INFO     | apps.chat.routes:list_attachments:380 | Successfully retrieved 1 attachments for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:59:01.969 | INFO     | apps.chat.routes:process_query:414 | Processing query request: what is this document about? for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 08:59:14.941 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 08:59:15.441 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: what is this document about?
2025-03-03 08:59:16.245 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: what is this document about?
2025-03-03 08:59:48.672 | INFO     | apps.chat.routes:process_query:414 | Processing query request: explain the document for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:00:00.415 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:00:00.843 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: explain the document
2025-03-03 09:00:01.240 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: explain the document
2025-03-03 09:00:31.597 | DEBUG    | apps.chat.routes:upload_attachments:275 | Uploading files to conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:00:48.890 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace default
2025-03-03 09:02:03.350 | INFO     | apps.chat.routes:process_query:414 | Processing query request: explain the document for conversation: d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:02:16.585 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:03:31.581 | DEBUG    | apps.chat.routes:create_message:133 | Creating message for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:03:44.890 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:04:51.843 | INFO     | core.vector_store.connection:close_connection:32 | Disconnected from Milvus
2025-03-03 09:04:51.846 | INFO     | __main__:lifespan:41 | Application shutdown complete
2025-03-03 09:07:27.988 | INFO     | __main__:lifespan:19 | Starting up application...
2025-03-03 09:07:27.993 | INFO     | core.db:init_db:20 | Initializing database...
2025-03-03 09:07:28.034 | INFO     | core.db:init_db:24 | Database initialization completed successfully
2025-03-03 09:07:28.176 | INFO     | core.vector_store.connection:ensure_connection:20 | Successfully connected to Milvus
2025-03-03 09:08:04.522 | DEBUG    | apps.chat.routes:create_message:133 | Creating message for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:08:54.753 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:09:08.199 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:09:09.718 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: explain the attached documents in single line
2025-03-03 09:09:10.102 | WARNING  | core.vector_store.manager:similarity_search:109 | No results found for query: explain the attached documents in single line
2025-03-03 09:10:40.441 | DEBUG    | apps.chat.routes:upload_attachments:275 | Uploading files to conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:10:58.500 | INFO     | core.vector_store.manager:initialize:51 | Created new vector store for namespace default
2025-03-03 09:12:11.814 | DEBUG    | apps.chat.routes:create_message:133 | Creating message for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:12:23.357 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:12:46.981 | DEBUG    | apps.chat.routes:create_message:133 | Creating message for conversation d3425549-504e-49e0-918c-da08ac0407a7
2025-03-03 09:12:58.771 | ERROR    | apps.rag.services:_generate_search_queries:391 | Failed to parse search queries
2025-03-03 09:14:23.134 | INFO     | core.vector_store.connection:close_connection:32 | Disconnected from Milvus
2025-03-03 09:14:23.138 | INFO     | __main__:lifespan:41 | Application shutdown complete
